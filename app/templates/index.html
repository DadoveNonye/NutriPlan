<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriPlan</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    
</head>
<body>
    <div id="main">
        <section id="navbar">
            <div class="logo"><a href="{{ url_for('auth.home') }}"><img src="static/images/NutriPlan_logo_without_BG.png" alt="Nutri Plan logo"></a></div>
            <nav><ul>
                <li><a href="{{ url_for('auth.home')}}">HOME</a></li>
                <li><a href="{{ url_for('api.get_meal_plans')}}">FOOD</a></li>
                <li><a href="">INTAKE</a></li>
                <li><a href="" id="showMeal">MY MEAL</a></li>
            </ul></nav>
               <button class="mlogin" id="mealPlanDirection"> <a href="{{ url_for('auth.logout') }}">Logout</a></button>
        </section>
        <section class="hero-section">
            <div class="hero-background-image">
                <h1>FINALLY! YOUR <br class="nutriBR">NUTRIPLANS </br>ARE TAILORED TO YOUR NEEDS.</h1>
                <button class="chat">Let's chat</button>
            </div>
            <div>
                <p>Maintaining an overall health and well-being is easier done with NutriPlan, the SEARCH stops here</p>
                <img src="static/images/nutriImage1.jpg" alt="A descriptive image of nutrition" class="heroImage">
            </div>
        </section>
        <section class="mealPlanForm" id="mealPlanForm">
            <form action="" method="get" id="inputForm">
                <label for="mealName">INPUT A MEAL</label>
                <input required type="text" placeholder="" id="mealName" name="mealName">
                <label for="mealDescription">MEAL DESCRIPTION</label>
                <textarea id="mealDescription" name="mealDescription" placeholder="Can you give a description about the meal?"></textarea>
                <button type="submit" value="submit" id="submitMeal">Submit</button>
                <button type="button" id="create-mealplan-btn">Create Meal Plan</button>

<script>
const createMealPlanBtn = document.getElementById('create-mealplan-btn');

createMealPlanBtn.addEventListener('click', async()=>{
  const name = document.getElementById('meal-plan-name').value;
  const description = document.getElementById('meal-plan-description').value;

  const response = await fetch('/mealplans', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, description })
  });

  if (!response.ok) {
    const errorData = await response.json();
    console.error('Error creating meal plan:', errorData.error);
    // Display error message to the user
  } else {
    const data = await response.json();
    console.log('Meal plan created:', data);
    // Update UI to show success message or redirect to view the new plan
  }
});
</script>

            </form>
            <div id="showMealDetail">MEAL DETAILS</div>
            <div id="devBox">
                <div id="descCloseBtnBox" class="hidden"> 
                   
                    <p id="viewDescriptionBox"></p>
                </div>
            </div>
        </section>
        <section>
            <div id="deleteConfirmationModal" class="modal">
                <div class="modal-content">
                  <p>Are you sure you want to delete this meal?</p>
                  <button id="confirmDeleteButton">Confirm</button>
                  <button id="cancelDeleteButton">Cancel</button>
                </div>
              </div>
        </section>
    </div>
</body>
</html>
<!-- <script src="static/js/main.js"></script> -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
